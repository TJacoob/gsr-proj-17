ip addr add dev eth0 10.0.0.129/30
ip link set dev eth0 up

ip addr add dev eth1 10.0.0.133/30
ip link set dev eth1 up

ip addr add dev eth2 10.0.2.97/28
ip link set dev eth2 up

ip addr add dev eth3 192.168.0.17/29
ip link set dev eth3 up

ip addr add dev eth4 10.0.2.113/28
ip link set dev eth4 up

ip addr add dev eth5 10.0.0.17/30
ip link set dev eth5 up

ip route add default via 10.0.0.18

/etc/init.d/dhcp3-server start
/etc/init.d/zebra start
/etc/init.d/snmpd start

dpkg -i /../usr/sudo.deb

# FIREWALL

# Permitir o acesso dos pc's publicos à internet
iptables -A FORWARD -p tcp --dport 80 -s 10.0.2.64/26 -j ACCEPT

# Bloquear o acesso dos pc's privados à internet
iptables -A FORWARD -p tcp --dport 80 -s 192.168.0.0/27 -j DROP			

# Bloquear o acesso exterior aos servidores privados
iptables -A FORWARD -p icmp -s 10.0.2.64/26 -d 192.168.0.0/27 -j ACCEPT
iptables -A FORWARD -p icmp -d 192.168.0.0/27 -j DROP

# Bloquear o Acesso do exterior aos servidores publicos,
# excepto os serviços essenciais 
iptables -A FORWARD -p icmp -s 192.168.0.0/27 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD -p icmp -s 10.0.2.64/26 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD -p icmp -d 10.0.2.96/28 -j DROP
iptables -A FORWARD --dport 22 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 25 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 80 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 110 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 111 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 143 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 199 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 443 -d 10.0.2.96/28 -j ACCEPT
iptables -A FORWARD --dport 953 -d 10.0.2.96/28 -j ACCEPT

# Bloquear o acesso do exterior aos IP's publicos
# Não está a funcionar porque não faço ideia como é que o deixo sair e voltar a entrar? XD
#iptables -A FORWARD -p icmp -s 10.0.2.64/26 -d 10.0.2.64/26 -j ACCEPT
#iptables -A FORWARD -p icmp -d 10.0.2.64/26 -j DROP

# PC's Visitantes devem ter livre acesso à internet
# Não está a funcionar for some reason??
iptables -A FORWARD -p tcp --dport 80 -s 10.0.2.64/28 -j ACCEPT